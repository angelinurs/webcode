<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>Insert title here</title>
		
		<style>
			.box {
				width: 300px;
				height: 350px;
				border: 1px solid #00f;
			}
			div.is_hidden {
				display: none;
				
			}
			
			input[type=checkbox]:checked + .is_hidden {
				display: block;
				transition-duration: 1s;
			}

			input[type=checkbox]:checked + label[for=toggleBox]:after {
				content: "hide";

			}

			table.table01 th, table.table01 td {
				border: 1px solid #dedede;
				padding: 4px;

				background-color: cadetblue;
			}

			table.table01 caption {
				text-indent: -9999px;
				height: 0;
			}

			table.table01>thead>tr:first-child td {
				border: none;
				text-align: right;
			}
		</style>
	</head>
	<body>
		<div id="wrap">
			<section>
				<article>
					<h1># 1. 유효성 검사</h1>
					<label for="toggleBox" >show</label>
					<input type="checkbox" id="toggleBox" />
					<div class="is_hidden">
						<form action="text.jsp" method="post">
							<label for="s_age">나이 :</label>
							<input type="text" id="s_age" name="age" />
							<br />
							
							<button type="button" onclick="valid_age();">확인</button>
						</form>
					</div>
				</article>
				
				<article>
					<h1># 2. Loop Test</h1>
					<label for="toggleBox" >show</label>
					<input type="checkbox" id="toggleBox" />
					<div class="is_hidden">
						<button type="button" onclick="loopTest();" >Loop Test</button>
						<p>
							<div id="box" class="box"></div>
						</p>
					</div>
				</article>
				
				<article id='art3' onload="onloadTest();">
					<h1># 3. mutiply</h1>
					<label for="toggleBox" >show</label>
					<input type="checkbox" id="toggleBox" />
					<div class="is_hidden">
						<div class="btn_no">
							<button type="button" onclick="mutiply(2);">2</button>
							<button type="button" onclick="mutiply(3);">3</button>
							<button type="button" onclick="mutiply(4);">4</button><br />
							<button type="button" onclick="mutiply(5);">5</button>
							<button type="button" onclick="mutiply(6);">6</button>
							<button type="button" onclick="mutiply(7);">7</button><br />
							<button type="button" onclick="mutiply(8);">8</button>
							<button type="button" onclick="mutiply(9);">9</button>
						</div>
						<p>
							<div id="multiply" class="box" ></div>
						</p>
					</div>
				</article>

				<article>
					<h1># 4. Check validation for signup form</h1>
					<label for="toggleBox" >show</label>
					<input type="checkbox" id="toggleBox" />
					<div class="is_hidden">
						<form action="" method="post" name="frm_birth">
							<label for="u_id">아이디</label>
							<input type="text" id="u_id" name="id" />
							<br />
							<label for="u_name">이름</label>
							<input type="text" id="u_name" name="name" />
							<br />
							<label for="u_pw">Password</label>
							<input type="password" id="u_pw" name="pw" />

							<br />
							<label for="u_loc">거주지</label>
							<select id="uloc" name="loc" >
								<option value="Seoul">Seoul</option>
								<option value="Busan">Busan</option>
								<option value="Inchon">Inchon</option>
							</select>
							<br />

							<button type="button" onclick="isValid();">확인</button>
						</form>
					</div>
				</article>

				<article>
					<h1># 5. Check validation for digit value</h1>
					<label for="toggleBox" >show</label>
					<input type="checkbox" id="toggleBox" />
					<div class="is_hidden">
						<form action="" method="post" name="frm1">
							<label for="b_year">태어난 년도</label>
							<input type="text" id="b_year" name="b_year" />
							<br />
							<!--
								`this` 는 현재 button 객체를 의미한다.
								`form` 은 현재 button 객체를 가지고 있는 form tag 객체를 가르킨다.
							-->
							<button type="button" onclick="checkValue( this.form );">확인</button>
						</form>
						<div id="age_box" class="box"></div>
					</div>
				</article>
				
				<article>
					<h1># 6. switch case</h1>
					<label for="toggleBox" >show</label>
					<input type="checkbox" id="toggleBox" />
					<div class="is_hidden">
						<form action="" method="">
							<label for="m_car">차종</label>
							<!--
								function call 이 이루지면서 select element 자체 object 와 선택된 값을 보냄.
							-->
							<select id="m_car" name="car" onchange="switchSelection( this.selectedIndex );">
								<option value="r8">Audi</option>
								<option value="GT">BentlyGT</option>
								<option value="porche">Porche Italia</option>
							</select>
						</form>
						<br />
						<div id="switch_box" class="box"></div>

					</div>

				</article>

				<article>
					<h1># 7. table add row 1</h1>
					<label for="toggleBox">show</label>
					<input type="checkbox" id="toggleBox" />
					<div class="is_hidden">
						<table id="table" class="table table01">
							<caption>행 추가 테이블</caption>
							<thead>
								<tr >
									<td colspan="3">
										<button type="button" onclick="add_row();">추가</button>
									</td>
								</tr>
								<tr>
									<th>번호</th>
									<th>이름</th>
									<th>연락처</th>
								</tr>
							</thead>
							<tbody></tbody>
						</table>
					</div>
				</article>

				<article id="art8">
					<h1># 8. table add row 2</h1>
					<label for="toggleBox">show</label>
					<input type="checkbox" id="toggleBox" />
					<div class="is_hidden">
							<label for="user_name" id="user_name_label">이름</label>
						<input type="text" id="user_name" name="user_name" />
						<br />
						<label for="u_phone" id="u_phone_label">연락처</label>
						<input type="text" id="u_phone" name="u_phone" />
						<br />
						
						<table id="table_2" class="table table01">
							<caption>행 추가 테이블</caption>
							<thead>
								<tr >
									<td colspan="4">
										<button type="button" onclick="add_row2();">추가</button>
									</td>
								</tr>
								<tr>
									<th>번호</th>
									<th>이름</th>
									<th>연락처</th>
									<th>선택</th>
								</tr>
							</thead>
							<tbody></tbody>
						</table>
					</div>
				</article>
				
				<article>
					<h1># 9. Regular expression</h1>
					<label for="toggleBox">show</label>
					<input type="checkbox" id="toggleBox" />
					<div class="is_hidden">
						<form action="" name="frm_2">
							<label for="v1">값1:</label>
							<input type="text1" id="v1" name="v1" />
							<button type="button" onclick="excute_fct();">Confirm</button>
						</form>
					</div>
				</article>
				
			</section>
			
		</div>

		<script>
			function valid_age() {
				let age = document.getElementById("s_age");
				
				if( age.value.trim().length ) {
					var value = age.value.trim();
					
					// value = Number( value );
					value = parseInt( value );
					if( value >= 20 && value <= 29 ) {
						alert( (value/10)*10 + " 대" );
					} else if ( value >= 30 && value <= 39 ) {
						alert( (value/10)*10 + " 대" );
					}
				}
			}

			function loopTest() {
				let box = document.getElementById('box');
				
				var temp = '';
				for( idx = 2; idx < 10; idx++ ) {
					temp += (idx + '&nbsp;dan<br />')
					for( jdx = 1; jdx < 10; jdx++ ) {
						temp += (idx + '&nbsp;x&nbsp;' + jdx + ' = ' + (idx * jdx + '<br />'));
					}
				}
				// alert( temp );
				
				box.innerHTML = temp;
			}
			
			/*
				use loop and make multiplication table
			*/
			function mutiply( nth ) {
				let box = document.getElementById('multiply');
				var temp = '';
				
				temp += (nth + '&nbsp;dan<br />')
				for( jdx = 1; jdx < 10; jdx++ ) {
					temp += (nth + '&nbsp;x&nbsp;' + jdx + ' = ' + (nth * jdx + '<br />'));
				}
				
				box.innerHTML = temp;
			}
			
			/*
				check to validate data with elements array
			*/
			function isValid() {
				let forms = document.forms;
				let form = forms.namedItem("frm1");
				// let form = forms[1];
				let elems = form.elements;
				
				for( idx=0; idx < elems.length-1; idx++ ) {
					// check valid each element in form tag
					if( elems[idx].value.trim().length < 1 ) {
						
						alert( elems[ idx ].name + " 값이 없습니다. " )
						elems[idx].focus();
						
						return;
					}
				}
				
				alert( "complete!!" );
			}
			
			/*
				if data is digit, handling to data
			*/
			function checkValue( frm ) {
				let b_year = frm.b_year.value;
				
				if( isDigit( b_year ) ) {
					console.log( b_year );
					
					let now = new Date();
					let curr_year = now.getFullYear();
					
					let age = curr_year - parseInt( b_year );
					
					document.getElementById("age_box").innerText = ( age < 19 )? "미성년자" : "성인";
				}
			}
			
			function isDigit( data ) {
				let value = true;
				
				// 받은 인자인 data 에서 한자씩 추출하여 
				// 숫자인지 아닌지를 판단하는 반복문
				for( let idx=0; idx < data.length; idx++ ) {
					// str.charAt( idx )
					// str.charCodeAt( idx )
					if( '0'.charCodeAt(0) > data.charCodeAt( idx ) 
					|| data.charCodeAt( idx ) > '9'.charCodeAt(0) ) {
						
						value = false;
						break;
					}
				}
				return value;
			}
			
			
			/*
				use anonymous function and then treat to next step
			*/
			let switchSelection = function( idx ) {
				let str='';
				
				switch( idx ) {
					case 1:
						msg = "웃는 아이";
						break;
					case 2:
						msg = "안 웃는 아이";
						break;
					case 3:
						msg = "하나도 안 웃는 아이";
						break;
				}

				document.getElementById("switch_box").innerHTML = msg;

				let items = document.getElementById("m_car");
				// alert( items.elements[ idx ].innerText );
				alert( items[idx].innerText );
			};

			let count = 0;
			let add_row = function() {
				// 추가 button 을 누를 때마다 call

				// table 에 추가할 행( row )을 만든다.
				let str = '<tr><td></td><td></td><td></td><tr>';

				// 위위 내용을 table 의 tbody 에 html code로 넣어준다.

				let table = document.getElementById("table");

				let tbody = table.children.item(2);
				
				// Case 01. append text type
				// tbody.innerHTML += str;
				
				// Case 02. append node type
				// let tr = document.createElement( "tr" );
				// let td1 = document.createElement( "td" );
				// let td2 = document.createElement( "td" );
				// let td3 = document.createElement( "td" );
				
				
				// tr.appendChild( td1 );
				// tr.appendChild( td2 );
				// tr.appendChild( td3 );
				
				// tbody.appendChild( tr );
				
				// Case 03. append clone node type
				let tr = document.createElement( "tr" );
				let td = document.createElement( "td" );
				
				tr.appendChild( td );
				tr.appendChild( td.cloneNode( false ) );
				tr.appendChild( td.cloneNode( false ) );
				
				tbody.appendChild( tr );

				// Case 04
				// let row = tbody.insertRow();
				// let cell1 = row.insertCell();
				// let cell2 = row.insertCell();
				// let cell3 = row.insertCell();
			};

			let table = document.getElementById( "table_2" );
			let add_row2 = function() {
				let user_name = document.getElementById( "user_name" );
				let user_phone = document.getElementById( "u_phone" );
				
				// alert( user_no.value + ", " + user_name.value + ", " + user_phone.value );

				
				let td1 = document.createElement( "td" );
				let td2 = td1.cloneNode(false);
				let td3 = td1.cloneNode(false);
				let td4 = td1.cloneNode(false);
				
				td1.innerText = count++;
				td2.innerText = user_name.value;
				td3.innerText = user_phone.value;

				// Case 01. plain text add
				// td4.innerHTML = '<input type="button" value="삭제" id="delete_row" onClick="delete_row( this );">';

				// Case 02. create node add
				let btn = document.createElement( "input" );
				btn.type = "button";
				btn.value = "삭제";
			    btn.id = "btn_" + count;
				btn.onclick = function() {
					// Case 01. remove this
					// this.parentElement.parentElement.remove();

					// Case 02. remove element
					// tr.remove();

					// Case 03. remove element by table rowIdx
					table.deleteRow( table.rowIdx );

				}

				td4.appendChild( btn );
				
				let tr = document.createElement( "tr" );

				tr.onmouseover = function() {
					table.rowIdx = this.rowIndex;

					// alert( this.rowIndex );

				};
				
				tr.style.textAlign = "center"

				let tbody = document.getElementById( "table_2" ).children.item(2);

				tr.appendChild( td1 );
				tr.appendChild( td2 );
				tr.appendChild( td3 );
				tr.appendChild( td4 );

				tbody.appendChild( tr );
			}

			let delete_row = function( elem ) {
				elem.parentElement.parentElement.remove();

			}

			function excute_fct() {
				let text = document.getElementById( "v1" ).value;
				let text2 = document.frm_2.v1.value;
				let text3 = document.forms.namedItem("frm_2").v1.value;

				// alert( text + "\n" + text2 + "\n" + text3 );

				// alert( my_trim( text ) );

				let trimedText = my_trim( text );

				if( trimedText.length < 1 ) {
					alert( "input any text" );
					return;
				}

				document.forms.namedItem("frm_2").v1.value = trimedText;
			}

			function my_trim( text ) {
				// ref site 
				// :: https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/String/replace
				// return text.replace(  /^\s+|\s+|\s+$/g, "" );
				return text.replace(  /\s+/g, "" );
			}
		</script>
	</body>
</html>